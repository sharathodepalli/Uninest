(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{1342:function(e,s,a){Promise.resolve().then(a.bind(a,7160))},7160:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return B}});var t=a(7437),i=a(2265),r=a(9376),l=a(6070),n=a(5186),d=a(6815),o=a(2869),c=a(8846),m=a(4508);let h=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsxs)(c.fC,{ref:s,className:(0,m.cn)("relative flex w-full touch-none select-none items-center",a),...i,children:[(0,t.jsx)(c.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(c.e6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(c.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});h.displayName=c.fC.displayName;var x=a(1800),u=a(3647),f=a(2926),g=a(7662),p=a(3850),j=a(8553),v=a(4938),b=a(3774),N=a(5252),w=a(3299),y=a(1047);let k=[{id:"wifi",label:"WiFi",icon:f.Z},{id:"parking",label:"Parking",icon:g.Z},{id:"gym",label:"Gym",icon:p.Z},{id:"kitchen",label:"Kitchen",icon:j.Z},{id:"laundry",label:"Laundry",icon:v.Z},{id:"ac",label:"Air Conditioning",icon:v.Z}];function Z(e){var s,a;let{filters:r,onFiltersChange:c}=e,[m,f]=(0,i.useState)([r.minRent||0,r.maxRent||3e3]),g=e=>{c({...r,location:e})},p=e=>{c({...r,availableDate:e})},j=(e,s)=>{let a=s?[...r.amenities,e]:r.amenities.filter(s=>s!==e);c({...r,amenities:a})};return(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"h-5 w-5"}),"Filters"]})}),(0,t.jsxs)(l.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"location",children:"Location"}),(0,t.jsx)(n.I,{id:"location",placeholder:"University or City",value:r.location,onChange:e=>g(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(d._,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Z,{className:"h-4 w-4"}),"Price Range"]}),(0,t.jsx)("div",{className:"px-2",children:(0,t.jsx)(h,{value:m,onValueChange:e=>{f(e),c({...r,minRent:e[0]>0?e[0]:void 0,maxRent:e[1]<3e3?e[1]:void 0})},min:0,max:3e3,step:50,className:"w-full"})}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["$",m[0]]}),(0,t.jsxs)("span",{children:["$",m[1],"+"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(d._,{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4"}),"Bedrooms"]}),(0,t.jsxs)(u.Ph,{value:(null===(s=r.bedrooms)||void 0===s?void 0:s.toString())||"any",onValueChange:e=>{c({...r,bedrooms:"any"===e?void 0:parseInt(e)})},children:[(0,t.jsx)(u.i4,{children:(0,t.jsx)(u.ki,{placeholder:"Any"})}),(0,t.jsxs)(u.Bw,{children:[(0,t.jsx)(u.Ql,{value:"any",children:"Any"}),(0,t.jsx)(u.Ql,{value:"1",children:"1"}),(0,t.jsx)(u.Ql,{value:"2",children:"2"}),(0,t.jsx)(u.Ql,{value:"3",children:"3"}),(0,t.jsx)(u.Ql,{value:"4",children:"4+"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(d._,{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4"}),"Bathrooms"]}),(0,t.jsxs)(u.Ph,{value:(null===(a=r.bathrooms)||void 0===a?void 0:a.toString())||"any",onValueChange:e=>{c({...r,bathrooms:"any"===e?void 0:parseInt(e)})},children:[(0,t.jsx)(u.i4,{children:(0,t.jsx)(u.ki,{placeholder:"Any"})}),(0,t.jsxs)(u.Bw,{children:[(0,t.jsx)(u.Ql,{value:"any",children:"Any"}),(0,t.jsx)(u.Ql,{value:"1",children:"1"}),(0,t.jsx)(u.Ql,{value:"2",children:"2"}),(0,t.jsx)(u.Ql,{value:"3",children:"3+"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(d._,{htmlFor:"date",className:"flex items-center gap-2",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),"Available Date"]}),(0,t.jsx)(n.I,{id:"date",type:"date",value:r.availableDate||"",onChange:e=>p(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(d._,{children:"Amenities"}),(0,t.jsx)("div",{className:"space-y-2",children:k.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.X,{id:e.id,checked:r.amenities.includes(e.id),onCheckedChange:s=>j(e.id,s)}),(0,t.jsxs)(d._,{htmlFor:e.id,className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(e.icon,{className:"h-4 w-4"}),e.label]})]},e.id))})]}),(0,t.jsx)(o.z,{variant:"outline",onClick:()=>{c({location:"",minRent:void 0,maxRent:void 0,bedrooms:void 0,bathrooms:void 0,availableDate:void 0,amenities:[],radius:10}),f([0,3e3])},className:"w-full",children:"Clear All Filters"})]})]})}var _=a(5974),C=a(6831),R=a(8997),M=a(1128),z=a(1094),S=a(8906),A=a(2208),I=a(2718),Q=a(7648);function P(e){let{listings:s,loading:a,error:r,onViewListing:n}=e,[d,c]=(0,i.useState)(new Set),m=e=>{let s=new Set(d);s.has(e)?s.delete(e):s.add(e),c(s)};return a?(0,t.jsx)("div",{className:"space-y-4",children:[...Array(6)].map((e,s)=>(0,t.jsx)(l.Zb,{className:"animate-pulse",children:(0,t.jsx)(l.aY,{className:"p-0",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"w-80 h-48 bg-muted"}),(0,t.jsxs)("div",{className:"flex-1 p-6 space-y-4",children:[(0,t.jsx)("div",{className:"h-6 bg-muted rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-1/2"}),(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-2/3"})]})]})})},s))}):r?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsxs)("p",{className:"text-destructive",children:["Error loading listings: ",r]})}):0===s.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"No listings found matching your criteria."}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your filters to see more results."})]}):(0,t.jsx)("div",{className:"space-y-6",children:s.map(e=>(0,t.jsx)(l.Zb,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:(0,t.jsx)(l.aY,{className:"p-0",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,t.jsxs)("div",{className:"relative md:w-80 h-48 md:h-auto",children:[(0,t.jsx)("img",{src:e.photos_urls[0]||"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg",alt:e.title,className:"w-full h-full object-cover"}),(0,t.jsx)(o.z,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 bg-black/20 hover:bg-black/40 text-white",onClick:()=>m(e.id),children:(0,t.jsx)(R.Z,{className:"h-4 w-4 ".concat(d.has(e.id)?"fill-red-500 text-red-500":"")})}),e.featured&&(0,t.jsx)(_.C,{className:"absolute top-2 left-2 bg-orange-500",children:"Featured"})]}),(0,t.jsxs)("div",{className:"flex-1 p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:e.title}),(0,t.jsxs)("p",{className:"text-muted-foreground flex items-center gap-1 mb-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),e.address]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-primary",children:["$",e.rent]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"per month"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(M.Z,{className:"h-4 w-4"}),e.bedrooms," bed",1!==e.bedrooms?"s":""]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4"}),e.bathrooms," bath",1!==e.bathrooms?"s":""]}),e.square_feet&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(z.Z,{className:"h-4 w-4"}),e.square_feet," sq ft"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),"Available ",new Date(e.available_date).toLocaleDateString()]})]}),e.amenities.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.amenities.slice(0,4).map(e=>(0,t.jsx)(_.C,{variant:"secondary",className:"text-xs",children:e},e)),e.amenities.length>4&&(0,t.jsxs)(_.C,{variant:"secondary",className:"text-xs",children:["+",e.amenities.length-4," more"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(C.Avatar,{className:"h-8 w-8",children:[(0,t.jsx)(C.AvatarImage,{src:e.profiles.photo_url||""}),(0,t.jsx)(C.AvatarFallback,{children:e.profiles.name.charAt(0).toUpperCase()})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e.profiles.name}),e.profiles.verified&&(0,t.jsx)(S.Z,{className:"h-4 w-4 text-green-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)(A.Z,{className:"h-3 w-3"}),e.view_count," views"]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.z,{size:"sm",variant:"outline",asChild:!0,children:(0,t.jsxs)(Q.default,{href:"/messages?listing=".concat(e.id,"&host=").concat(e.host_id),children:[(0,t.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Message"]})}),(0,t.jsx)(o.z,{size:"sm",asChild:!0,children:(0,t.jsx)(Q.default,{href:"/listings/".concat(e.id),onClick:()=>n(e.id),children:"View Details"})})]})]})]})]})})},e.id))})}var L=a(9397),D=a(9554),E=a(7877);function V(e){let{listings:s,loading:a,onViewListing:r}=e,[n,d]=(0,i.useState)(null),[c,m]=(0,i.useState)({lat:40.7128,lng:-74.006}),[h,x]=(0,i.useState)(12),u=s.filter(e=>e.latitude&&e.longitude).map(e=>({id:e.id,latitude:e.latitude,longitude:e.longitude,price:e.rent,selected:(null==n?void 0:n.id)===e.id}));return a?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"h-96 bg-muted animate-pulse rounded-lg"}),(0,t.jsx)("div",{className:"h-48 bg-muted animate-pulse rounded-lg"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(l.Zb,{children:(0,t.jsx)(l.aY,{className:"p-4",children:(0,t.jsx)(()=>(0,t.jsxs)("div",{className:"relative w-full h-96 bg-gradient-to-br from-blue-100 via-green-50 to-blue-50 rounded-lg overflow-hidden border",children:[(0,t.jsxs)("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[(0,t.jsx)(o.z,{variant:"outline",size:"sm",className:"bg-white shadow-lg hover:shadow-xl transition-shadow",onClick:()=>x(Math.min(h+1,18)),children:(0,t.jsx)(L.Z,{className:"h-4 w-4"})}),(0,t.jsx)(o.z,{variant:"outline",size:"sm",className:"bg-white shadow-lg hover:shadow-xl transition-shadow",onClick:()=>x(Math.max(h-1,8)),children:(0,t.jsx)(D.Z,{className:"h-4 w-4"})}),(0,t.jsx)(o.z,{variant:"outline",size:"sm",className:"bg-white shadow-lg hover:shadow-xl transition-shadow",onClick:()=>{m({lat:40.7128,lng:-74.006})},children:(0,t.jsx)(E.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"absolute inset-0 opacity-30",children:(0,t.jsxs)("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("defs",{children:(0,t.jsx)("pattern",{id:"search-grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:(0,t.jsx)("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"#94a3b8",strokeWidth:"1"})})}),(0,t.jsx)("rect",{width:"100%",height:"100%",fill:"url(#search-grid)"})]})}),(0,t.jsx)("div",{className:"absolute inset-0",children:(0,t.jsxs)("svg",{className:"absolute inset-0 w-full h-full",children:[(0,t.jsx)("path",{d:"M 0 200 Q 150 180 300 200 T 600 200",stroke:"#e2e8f0",strokeWidth:"3",fill:"none",opacity:"0.6"}),(0,t.jsx)("path",{d:"M 200 0 Q 220 150 200 300 T 200 600",stroke:"#e2e8f0",strokeWidth:"3",fill:"none",opacity:"0.6"})]})}),(0,t.jsx)("div",{className:"absolute inset-0",children:u.map((e,a)=>(0,t.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-all duration-200 hover:scale-110 ".concat(e.selected?"z-20 scale-110":"z-10"),style:{left:"".concat(Math.min(Math.max(60+a%6*80+30*Math.sin(a),30),90),"%"),top:"".concat(Math.min(Math.max(80+60*Math.floor(a/6)+20*Math.cos(a),20),80),"%")},onClick:()=>{let a=s.find(s=>s.id===e.id);a&&d(a)},children:[(0,t.jsxs)("div",{className:"px-3 py-2 rounded-full text-sm font-semibold shadow-lg transition-all duration-200 ".concat(e.selected?"bg-primary text-primary-foreground shadow-xl ring-2 ring-primary/50":"bg-white text-gray-900 hover:bg-gray-50 shadow-md hover:shadow-lg"),children:["$",e.price.toLocaleString()]}),(0,t.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 ".concat(e.selected?"border-primary border-l-transparent border-r-transparent":"border-white border-l-transparent border-r-transparent")})]},e.id))}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-primary rounded-full"}),(0,t.jsx)("span",{children:"Selected Property"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm mt-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-gray-300 rounded-full"}),(0,t.jsx)("span",{children:"Available Properties"})]})]}),(0,t.jsx)("div",{className:"absolute bottom-2 right-2 text-xs text-gray-600 bg-white/80 px-2 py-1 rounded",children:"Map ready for Mapbox integration"})]}),{})})}),n&&(0,t.jsx)(l.Zb,{className:"border-primary shadow-lg",children:(0,t.jsx)(l.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-32 h-20 rounded-lg overflow-hidden flex-shrink-0",children:(0,t.jsx)("img",{src:n.photos_urls[0]||"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb&w=300",alt:n.title,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold",children:n.title}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(b.Z,{className:"h-3 w-3"}),n.address]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(M.Z,{className:"h-3 w-3"}),n.bedrooms]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(w.Z,{className:"h-3 w-3"}),n.bathrooms]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(A.Z,{className:"h-3 w-3"}),n.view_count]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-primary",children:["$",n.rent.toLocaleString()]}),(0,t.jsx)(o.z,{size:"sm",asChild:!0,children:(0,t.jsx)(Q.default,{href:"/listings/".concat(n.id),onClick:()=>r(n.id),children:"View Details"})})]})]})})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,t.jsx)(l.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat((null==n?void 0:n.id)===e.id?"ring-2 ring-primary shadow-lg":""),onClick:()=>d(e),children:(0,t.jsxs)(l.aY,{className:"p-4",children:[(0,t.jsx)("div",{className:"aspect-video rounded-lg overflow-hidden mb-3",children:(0,t.jsx)("img",{src:e.photos_urls[0]||"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb&w=400",alt:e.title,className:"w-full h-full object-cover"})}),(0,t.jsx)("h3",{className:"font-semibold truncate",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.address}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:[e.bedrooms,"bd"]}),(0,t.jsxs)("span",{children:[e.bathrooms,"ba"]})]}),(0,t.jsxs)("div",{className:"font-bold text-primary",children:["$",e.rent.toLocaleString()]})]}),e.featured&&(0,t.jsx)(_.C,{className:"mt-2 bg-orange-500",children:"Featured"})]})},e.id))}),0===s.length&&(0,t.jsx)(l.Zb,{children:(0,t.jsxs)(l.aY,{className:"p-12 text-center",children:[(0,t.jsx)(b.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No listings found"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Try adjusting your search filters to see more results."})]})})]})}var F=a(8808),O=a(7586),q=a(2048),Y=a(2141);function $(){var e;let s=(0,r.useSearchParams)(),[a,l]=(0,i.useState)("list"),[n,d]=(0,i.useState)({location:s.get("location")||"",minRent:s.get("minRent")?parseInt(s.get("minRent")):void 0,maxRent:s.get("maxRent")?parseInt(s.get("maxRent")):void 0,bedrooms:s.get("bedrooms")?parseInt(s.get("bedrooms")):void 0,bathrooms:s.get("bathrooms")?parseInt(s.get("bathrooms")):void 0,availableDate:s.get("date")||void 0,amenities:(null===(e=s.get("amenities"))||void 0===e?void 0:e.split(",").filter(Boolean))||[],radius:10,latitude:void 0,longitude:void 0}),{listings:c,loading:m,error:h,trackView:x}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[s,a]=(0,i.useState)([]),[t,r]=(0,i.useState)(!0),[l,n]=(0,i.useState)(null);(0,i.useEffect)(()=>{d()},[e]);let d=async()=>{try{r(!0),n(null);let s=Y.OQ.from("listings").select("\n          *,\n          profiles:host_id (\n            name,\n            photo_url,\n            verified\n          )\n        ").eq("status","active").order("created_at",{ascending:!1});e.minRent&&(s=s.gte("rent",e.minRent)),e.maxRent&&(s=s.lte("rent",e.maxRent)),e.bedrooms&&(s=s.eq("bedrooms",e.bedrooms)),e.bathrooms&&(s=s.gte("bathrooms",e.bathrooms)),e.availableDate&&(s=s.lte("available_date",e.availableDate));let{data:t,error:i}=await s;if(i)throw i;let l=t||[];e.latitude&&e.longitude&&e.radius&&(l=l.filter(s=>!!s.latitude&&!!s.longitude&&function(e,s,a,t){let i=(a-e)*Math.PI/180,r=(t-s)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*3958.754641}(e.latitude,e.longitude,s.latitude,s.longitude)<=e.radius)),e.amenities&&e.amenities.length>0&&(l=l.filter(s=>e.amenities.every(e=>s.amenities.includes(e)))),a(l)}catch(e){n(e instanceof Error?e.message:"An error occurred")}finally{r(!1)}},o=async e=>{try{let{data:s,error:a}=await Y.OQ.from("listings").insert(e).select().single();if(a)throw a;return d(),{data:s,error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"An error occurred"}}};return{listings:s,loading:t,error:l,refetch:d,createListing:o,updateListing:async(e,s)=>{try{let{data:t,error:i}=await Y.OQ.from("listings").update(s).eq("id",e).select().single();if(i)throw i;return a(a=>a.map(a=>a.id===e?{...a,...s}:a)),{data:t,error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"An error occurred"}}},deleteListing:async e=>{try{let{error:s}=await Y.OQ.from("listings").delete().eq("id",e);if(s)throw s;return a(s=>s.filter(s=>s.id!==e)),{error:null}}catch(e){return{error:e instanceof Error?e.message:"An error occurred"}}},trackView:async e=>{try{await Y.OQ.from("listing_views").insert({listing_id:e}),a(s=>s.map(s=>s.id===e?{...s,view_count:s.view_count+1}:s))}catch(e){console.error("Error tracking view:",e)}}}}(n);return(0,i.useEffect)(()=>{d(e=>{var a;return{...e,location:s.get("location")||"",minRent:s.get("minRent")?parseInt(s.get("minRent")):void 0,maxRent:s.get("maxRent")?parseInt(s.get("maxRent")):void 0,bedrooms:s.get("bedrooms")?parseInt(s.get("bedrooms")):void 0,bathrooms:s.get("bathrooms")?parseInt(s.get("bathrooms")):void 0,availableDate:s.get("date")||void 0,amenities:(null===(a=s.get("amenities"))||void 0===a?void 0:a.split(",").filter(Boolean))||[]}})},[s]),(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(F.Header,{}),(0,t.jsx)("div",{className:"container py-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)(Z,{filters:n,onFiltersChange:d})}),(0,t.jsxs)("div",{className:"lg:col-span-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:n.location?"Properties in ".concat(n.location):"Search Results"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(o.z,{variant:"list"===a?"default":"outline",size:"sm",onClick:()=>l("list"),children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),"List"]}),(0,t.jsxs)(o.z,{variant:"map"===a?"default":"outline",size:"sm",onClick:()=>l("map"),children:[(0,t.jsx)(q.Z,{className:"h-4 w-4 mr-2"}),"Map"]})]})]}),"list"===a?(0,t.jsx)(P,{listings:c,loading:m,error:h,onViewListing:x}):(0,t.jsx)(V,{listings:c,loading:m,onViewListing:x})]})]})})]})}function B(){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading search..."}),children:(0,t.jsx)($,{})})}},5974:function(e,s,a){"use strict";a.d(s,{C:function(){return n}});var t=a(7437);a(2265);var i=a(7712),r=a(4508);let l=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:a,...i}=e;return(0,t.jsx)("div",{className:(0,r.cn)(l({variant:a}),s),...i})}},1800:function(e,s,a){"use strict";a.d(s,{X:function(){return d}});var t=a(7437),i=a(2265),r=a(9270),l=a(401),n=a(4508);let d=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(r.fC,{ref:s,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...i,children:(0,t.jsx)(r.z$,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(l.Z,{className:"h-4 w-4"})})})});d.displayName=r.fC.displayName},5186:function(e,s,a){"use strict";a.d(s,{I:function(){return l}});var t=a(7437),i=a(2265),r=a(4508);let l=i.forwardRef((e,s)=>{let{className:a,type:i,...l}=e;return(0,t.jsx)("input",{type:i,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...l})});l.displayName="Input"},6815:function(e,s,a){"use strict";a.d(s,{_:function(){return o}});var t=a(7437),i=a(2265),r=a(6394),l=a(7712),n=a(4508);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(r.f,{ref:s,className:(0,n.cn)(d(),a),...i})});o.displayName=r.f.displayName},3647:function(e,s,a){"use strict";a.d(s,{Bw:function(){return f},Ph:function(){return c},Ql:function(){return g},i4:function(){return h},ki:function(){return m}});var t=a(7437),i=a(2265),r=a(8856),l=a(875),n=a(2135),d=a(401),o=a(4508);let c=r.fC;r.ZA;let m=r.B4,h=i.forwardRef((e,s)=>{let{className:a,children:i,...n}=e;return(0,t.jsxs)(r.xz,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[i,(0,t.jsx)(r.JO,{asChild:!0,children:(0,t.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=r.xz.displayName;let x=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(r.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...i,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let u=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(r.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...i,children:(0,t.jsx)(l.Z,{className:"h-4 w-4"})})});u.displayName=r.$G.displayName;let f=i.forwardRef((e,s)=>{let{className:a,children:i,position:l="popper",...n}=e;return(0,t.jsx)(r.h_,{children:(0,t.jsxs)(r.VY,{ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,t.jsx)(x,{}),(0,t.jsx)(r.l_,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,t.jsx)(u,{})]})})});f.displayName=r.VY.displayName,i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(r.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...i})}).displayName=r.__.displayName;let g=i.forwardRef((e,s)=>{let{className:a,children:i,...l}=e;return(0,t.jsxs)(r.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.wU,{children:(0,t.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(r.eT,{children:i})]})});g.displayName=r.ck.displayName,i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(r.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...i})}).displayName=r.Z0.displayName}},function(e){e.O(0,[438,580,212,648,964,562,393,864,919,971,117,744],function(){return e(e.s=1342)}),_N_E=e.O()}]);